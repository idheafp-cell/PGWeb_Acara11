<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />

    <title>WebGIS Sleman</title>

    <style>
      #map {
        width: 100%;
        height: calc(100vh - 48px); /* Adjusted for navbar */
        margin: 0;
        padding: 0;
      }
      body {
        background-color: #edf7e7;
        font-family: "Segoe UI", Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      .navbar {
        background-color: #a9d9a3; /* hijau lembut */
        border-bottom: 2px solid #9dc596;
        padding-top: 0.2rem;
        padding-bottom: 0.2rem;
      }
    </style>
  </head>

  <body>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <!-- Leaflet-Geoserver Request -->
    <script src="lib/L.Geoserver.js"></script>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">PETA KABUPATEN SLEMAN</a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Profil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="peta.html">Peta</a>
            </li>
            
          </ul>
        </div>
      </div>
    </nav>

    <!-- Map Container -->
    <div id="map"></div>
    <script>
      var map = L.map("map").setView([-7.69244, 110.3919], 12);

      var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
      }).addTo(map);

      // WMS Layer 1 (GeoServer lokal)
      var wmsLayer1 = L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
        layers: "pgweb:Batas_Admin_Sleman",
        format: "image/png",
        transparent: true,
      }).addTo(map);

      // WMS Layer 2 (Jalan Sleman)
      var wmsLayer2 = L.Geoserver.wms(
        "https://geoportal.slemankab.go.id/geoserver/geonode/wms",
        {
          layers: "geonode:jalan_kabupaten_sleman_2023",
          format: "image/png",
          transparent: true,
        }
      ).addTo(map);

      // WMS Layer 3 (Penduduk)
      var wmsLayer3 = L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
        layers: "pgweb:penduduk_sleman_view",
        format: "image/png",
        transparent: true,
      }).addTo(map);

      // Legend
      var layerLegend = L.Geoserver.legend(
        "http://localhost:8080/geoserver/wms",
        {
          layers: "pgweb:Batas_Admin_Sleman",
        }
      ).addTo(map);

      // Layer Control
      var baseMaps = {
        "Open Street Map": osm,
      };

      var overlayMaps = {
        "Batas Administrasi": wmsLayer1,
        "Jalan Sleman": wmsLayer2,
        "Penduduk Sleman": wmsLayer3,
      };

      L.control.layers(baseMaps, overlayMaps).addTo(map);
    </script>
  </body>
</html>
